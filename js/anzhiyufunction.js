function mouseleaveHomeCard(){const e=document.querySelector(".topGroup");e&&e.addEventListener("mouseleave",(function(){document.getElementById("todayCard").classList.remove("hide"),document.getElementById("todayCard").style.zIndex=1}))}function owoBig(){let e=1,t="",n=document.createElement("div");n.id="owo-big";let o=document.querySelector("body");o.appendChild(n),document.getElementById("post-comment").addEventListener("DOMNodeInserted",(r=>{if(r.target.classList&&"OwO-body"==r.target.classList.value){let i=r.target;i.addEventListener("contextmenu",(e=>e.preventDefault())),i.addEventListener("mouseover",(r=>{"IMG"==r.target.tagName&&e&&(e=0,t=setTimeout((()=>{let e=3*r.target.clientHeight,t=3*r.target.clientWidth,i=r.x-r.offsetX-(t-r.target.clientWidth)/2;i+t>o.clientWidth&&(i-=i+t-o.clientWidth+10),i<0&&(i=10);let a=r.y-r.offsetY;n.style.height=e+"px",n.style.width=t+"px",n.style.left=i+"px",n.style.top=a+"px",n.style.display="flex",n.innerHTML=`<img src="${r.target.src}">`}),300))})),i.addEventListener("mouseout",(o=>{n.style.display="none",e=1,clearTimeout(t)}))}}))}function isInViewPortOfOne(e){if(!e)return;const t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return e.offsetTop-document.documentElement.scrollTop<=t}function anzhiyuScrollFn(){let e=!1;const t=document.getElementById("nav-music"),n=document.getElementById("footer"),o=document.getElementById("waterfall"),r=document.getElementById("percent");let i=document.getElementById("post-comment")||document.getElementById("footer");window.anzhiyuScrollFnToDo=btf.throttle((function(){n&&t&&768<document.body.clientWidth&&(t.style.bottom=isInViewPortOfOne(n)?"-10px":"20px",t.style.opacity=isInViewPortOfOne(n)?"0":"1");let a=document.documentElement.scrollTop||window.pageYOffset,c=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,l=Math.round(a/c*100);if(l=Math.min(99,Math.max(0,l)),isInViewPortOfOne(i)||90<l?(document.getElementById("nav-totop").classList.add("long"),r.textContent="返回顶部",e=!0):(document.getElementById("nav-totop").classList.remove("long"),r.textContent=l),o){const t=a%document.documentElement.clientHeight;!e&&t+100>=document.documentElement.clientHeight?(console.info(t,document.documentElement.clientHeight),setTimeout((()=>{waterfall("#waterfall")}),500)):setTimeout((()=>{o&&waterfall("#waterfall")}),500)}}),48),window.addEventListener("scroll",anzhiyuScrollFnToDo)}function totraveling(){btf.snackbarShow("即将跳转到「开往」项目的成员博客，不保证跳转网站的安全性和可用性",!1,5e3),setTimeout((function(){window.open("https://www.travellings.cn/go.html")}),"5000")}function replaceAll(e,t,n){return e.split(t).join(n)}document.getElementById("post-comment")&&owoBig(),window.onkeydown=function(e){123===e.keyCode&&btf.snackbarShow("开发者模式已打开，请遵循GPL协议",!1)};var navFn={switchDarkMode:()=>{"light"===("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),saveToLocal.set("theme","light",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),"function"==typeof runMermaid&&window.runMermaid()}};function musicBindEvent(){document.querySelector("#nav-music .aplayer-music").addEventListener("click",(function(){anzhiyu.musicTelescopic()})),document.querySelector("#nav-music .aplayer-button").addEventListener("click",(function(){anzhiyu.musicToggle(!1)}))}function dogePlayerInit(e){new DogePlayer({container:document.getElementById(e.container),userId:e.userId||4945,vcode:e.vcode,autoPlay:!1})}function hasMobile(){let e=!1;return(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)||document.body.clientWidth<800)&&(e=!0),e}function coverColor(){var e=document.getElementById("post-top-bg")?.src;const t=document.querySelector(":root");if(void 0!==e){var n=new XMLHttpRequest;n.open("GET",e+"?imageAve",!0),n.send(),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=n.responseText;try{var o=JSON.parse(e,(function(e,t){return t})),r=o.RGB;"light"==getContrastYIQ(r="#"+r.slice(2))&&(r=LightenDarkenColor(colorHex(r),-40)),t.style.setProperty("--anzhiyu-bar-background",r),anzhiyu.initThemeColor()}catch(e){t.style.setProperty("--anzhiyu-bar-background","var(--anzhiyu-main)"),anzhiyu.initThemeColor()}}}}else t.style.setProperty("--anzhiyu-bar-background","var(--anzhiyu-meta-theme-color)");anzhiyu.initThemeColor()}function colorHex(e){var t=e;if(/^(rgb|RGB)/.test(t)){for(var n=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),o="#",r=0;r<n.length;r++){var i=Number(n[r]).toString(16);"0"===i&&(i+=i),o+=i}return 7!==o.length&&(o=t),o}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t))return t;var a=t.replace(/#/,"").split("");if(6===a.length)return t;if(3===a.length){var c="#";for(r=0;r<a.length;r+=1)c+=a[r]+a[r];return c}}function colorRgb(e){var t=e.toLowerCase();if(t&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var n="#",o=1;o<4;o+=1)n+=t.slice(o,o+1).concat(t.slice(o,o+1));t=n}var r=[];for(o=1;o<7;o+=2)r.push(parseInt("0x"+t.slice(o,o+2)));return"rgb("+r.join(",")+")"}return t}function LightenDarkenColor(e,t){var n=!1;"#"==e[0]&&(e=e.slice(1),n=!0);var o=parseInt(e,16),r=(o>>16)+t;r>255?r=255:r<0&&(r=0);var i=(o>>8&255)+t;i>255?i=255:i<0&&(i=0);var a=(255&o)+t;return a>255?a=255:a<0&&(a=0),(n?"#":"")+String("000000"+(a|i<<8|r<<16).toString(16)).slice(-6)}function getContrastYIQ(e){var t,n=colorRgb(e).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return t=299*n[1]+587*n[2]+114*n[3],(t/=255e3)>=.5?"light":"dark"}function listenToPageInputPress(){var e=document.getElementById("toPageText");e&&e.addEventListener("keydown",(e=>{if(13===e.keyCode){anzhiyu.toPage();var t=document.getElementById("toPageButton").href;pjax.loadUrl(t)}}))}